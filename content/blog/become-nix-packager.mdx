---
title: "成为nix打包者"
description: "can i do it?"
image: /images/blog/dragon-maid.jpg
date: "2023-11-08"
authors:
  - Kud
---

资料：
- [nix.dev](https://nix.dev/)
- [nix pills](https://nixos.org/guides/nix-pills/index.html)
- [nixpkgs manual](https://nixos.org/manual/nixpkgs/stable/)
- [nixos wiki](https://nixos.wiki/wiki/Main_Page)
- [hydra manual](https://hydra.nixos.org/build/196107287/download/1/hydra/)
- [home manager manual](https://nix-community.github.io/home-manager/)

---

一个在GitHub上的PR，带有多个标签（labels），每个标签代表了PR的不同状态或分类：
- 6.topic: python: 这个标签可能是用来指示该PR涉及的主题或分类，这里是Python。
- 10.rebuild-linux: 501+: 表示这个PR会导致超过500个包在Linux上重新构建。
- 10.rebuild-darwin: 501+: 表示这个PR会导致超过500个包在Darwin系统（macOS）上重新构建。
- 11.by: package-maintainer: 可能表示这个PR是由包的维护者提交的。
- 10.rebuild-linux: 1001-2500: 这个标签进一步具体化了Linux上影响的重建包的数量，介于1001到2500个之间。
- 10.rebuild-darwin: 501-1000: 类似地，这个标签表示影响在Darwin系统上重建的包的数量，介于501到1000个之间。
- 12.approvals: 1: 表示该PR已经得到了至少一个审批。

重建（rebuild）的标签被分为不同的数量范围，这可能是因为Nix社区在合并PR时会考虑到它们对现有包集的潜在影响大小，以便安排测试和集成的优先级。

---

NixOS 这样的大型项目中，多个分支用于不同的目的，以帮助管理代码的流动和稳定性。这里是一些常见分支的概述及其可能的用途：
- staging: 这是主要的staging分支，通常用于存放将导致大量重建的更改。它们在被合并到主分支之前会在这里进行一段时间的测试。
- staging-XX.YY: 这些分支与特定的NixOS版本相关联，例如23.05指的是2023年5月的发布版。staging-23.05分支用于该版本的大规模更改，这些更改需要进行广泛的测试，但可能不想影响当前的开发分支。
- test-staging: 这可能是一个更加实验性或临时性的分支，用于在合并到staging之前测试更改。它可以用来确保更改不会破坏构建过程或其他人的工作。
- test-staging-XX.YY: 类似于test-staging，这些分支可能用于特定版本的更为实验性的测试。它们可以被用来测试与特定版本相关的更改，并确保这些更改在合并到对应的staging-XX.YY分支前不会引起问题。


