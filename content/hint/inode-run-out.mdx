---
title: "inode耗尽"
date: "2023-09-04"
---

当我们谈论硬盘的使用空间时，通常指的是硬盘上的数据块（data block）的使用率。然而，对于UNIX和类UNIX系统（例如Linux），每个文件或目录不仅需要数据块来存储其实际内容，还需要一个inode来存储其元数据。元数据包括文件的所有者、权限、创建时间、修改时间、访问时间等信息，以及指向文件数据块的指针。

inode的数量在文件系统创建时就已经确定，且通常无法在不重新格式化的情况下进行更改。每个文件或目录都需要一个inode，无论文件的大小如何。因此，如果你有大量小文件（例如1KB），那么你可能会耗尽inode，尽管数据块的使用率可能仍然很低。这就是为什么你的朋友的硬盘只用了30%的空间，但却无法写入文件的原因：尽管还有很多空闲的数据块，但已经没有可用的inode来存储新文件的元数据。